{
  "hash": "1efc852da06fcc768260271e4700d188",
  "result": {
    "markdown": "---\ntitle: \"Notebook with Data from Shiny\"\nformat:\n  html:\n    code-tools: \n      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/ojs/examples/_shiny/data/data-shiny-ojs.qmd\nserver: shiny\n---\n\n\nThis example takes the existing Observable notebook [\\@d3/hexbin](https://observablehq.com/@d3/hexbin) and renders the interesting parts in this page (the input slider and the output plot).\n\nWe also replace the data in the original notebook with our own copy of the data from Shiny, adding the ability to filter the data.\n\nClick the **Code** button above to see the source code.\n\n\n```{ojs}\n// Import the hexbin notebook, replacing its data with our own\nimport {viewof radius, chart} with {data as data} from \"@d3/hexbin\";\n\n// The data used by the chart is this: a transposed version of the\n// diamonds Shiny reactive that is defined in the R chunk below.\ndata = transpose(diamonds)\n```\n\n```{ojs}\n//| panel: sidebar\nviewof radius\n\nviewof cut = {\n  const levels = [\"Fair\", \"Good\", \"Very Good\", \"Premium\", \"Ideal\"];\n  return Inputs.select(levels, {value: levels, multiple: true, label: \"Filter by cut:\"});\n}\n```\n\n```{ojs}\n//| panel: fill\nchart\n```\n\n::: {.cell context='server'}\n\n:::\npreserveb3d5c12d99c01240\npreserve86803ef2ae3d4501\n\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"dependencies\">\n{\"type\":\"list\",\"attributes\":{},\"value\":[]}\n</script>\n<!--/html_preserve-->\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"execution_dependencies\">\n{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\",\"version\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"data.frame\"]},\"row.names\":{\"type\":\"integer\",\"attributes\":{},\"value\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"base\",\"cli\",\"compiler\",\"datasets\",\"digest\",\"ellipsis\",\"evaluate\",\"fastmap\",\"graphics\",\"grDevices\",\"htmltools\",\"htmlwidgets\",\"httpuv\",\"jsonlite\",\"knitr\",\"later\",\"lifecycle\",\"magrittr\",\"methods\",\"mime\",\"promises\",\"R6\",\"Rcpp\",\"rlang\",\"rmarkdown\",\"rstudioapi\",\"shiny\",\"stats\",\"tools\",\"utils\",\"xfun\",\"xtable\",\"yaml\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"4.2.2\",\"3.6.0\",\"4.2.2\",\"4.2.2\",\"0.6.31\",\"0.3.2\",\"0.20\",\"1.1.1\",\"4.2.2\",\"4.2.2\",\"0.5.4\",\"1.6.2\",\"1.6.11\",\"1.8.4\",\"1.45\",\"1.3.0\",\"1.0.3\",\"2.0.3\",\"4.2.2\",\"0.12\",\"1.2.0.1\",\"2.5.1\",\"1.0.10\",\"1.1.0\",\"2.26\",\"0.14\",\"1.7.4\",\"4.2.2\",\"4.2.2\",\"4.2.2\",\"0.42\",\"1.8-4\",\"2.3.7\"]}]}]}\n</script>\n<!--/html_preserve-->",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {
      "preserve86803ef2ae3d4501": "\n<script type=\"application/shiny-prerendered\" data-context=\"server-extras\">\nojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {\n  quos <- rlang::enquos(...)\n  vars <- rlang::list2(...)\n  nm <- names(vars)\n  if (is.null(nm)) {\n    nm <- rep_len(\"\", length(vars))\n  }\n  mapply(function(q, nm, val) {\n    # Infer name, if possible\n    if (nm == \"\") {\n      tryCatch({\n        nm <- rlang::as_name(q)\n      }, error = function(e) {\n        code <- paste(collapse = \"\\n\", deparse(rlang::f_rhs(q)))\n        stop(\"ojs_define() could not create a name for the argument: \", code)\n      })\n    }\n    .session$output[[nm]] <- val\n    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)\n    .session$sendCustomMessage(\"ojs-export\", list(name = nm))\n    NULL\n  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)\n  invisible()\n}\n</script>\n",
      "preserveb3d5c12d99c01240": "\n<script type=\"application/shiny-prerendered\" data-context=\"server\">\nlibrary(dplyr)\n\ndiamonds <- reactive({\n  ggplot2::diamonds %>%\n    filter(cut %in% input$cut) %>%\n    select(x = carat, y = price)\n})\nojs_define(diamonds)\n</script>\n"
    },
    "postProcess": true
  }
}